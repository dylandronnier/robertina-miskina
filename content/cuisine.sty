\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{cuisine}
\RequirePackage{xkeyval}

% Links in the book

% Colors
\RequirePackage{xcolor} % Required for specifying colors by name
\definecolor{ocre}{RGB}{126,12,40}  % Define the red color used for highlighting
\definecolor{vert}{RGB}{106,152,8}


% Pictures and graphic content
\RequirePackage{graphicx} % Required for including pictures
\graphicspath{{pictures/}} % Specifies the directory where pictures are stored
\RequirePackage{wrapfig} % To wrap the tabular with the ingredients
%\RequirePackage{floatrow}
\RequirePackage{tikz} % Required for drawing custom shapes
\RequirePackage{eso-pic} % for background pictures
\RequirePackage{transparent} % for transparency

% Fonts
\RequirePackage{polyglossia}
\setdefaultlanguage{french}
%\RequirePackage[defaultfam,tabular,lining,alternates]{montserrat} %% Option 'defaultfam'
%% only if the base font of the document is to be sans serif
%\renewcommand*\oldstylenums[1]{{\fontfamily{Montserrat-TOsF}\selectfont #1}}

% the name of the TOC
\addto\captionsfrench{% Replace "english" with the language you use
  \renewcommand{\contentsname}%
    {Au menu}%
}

% lists
\RequirePackage{enumitem}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                      Elements of the recipe                     %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\RequirePackage[compact]{titlesec}
\titleformat{\section}
        {\color{ocre}\sffamily\Huge\bfseries}
       {\color{ocre}\sffamily\thesection}{1em}{}
\renewcommand{\thesection}{}

% Name of the recipe
\newcommand*{\recette}[1]{
        \newpage 
        \section{#1}
}

\makeatletter
\newcommand{\auteurrecette}[1]{%
  {\parindent40pt\vspace*{-4pt}%
    \color{vert}\sffamily\large\bfseries Par #1%
    \par\nobreak\vspace*{20pt}}
  \@afterheading%
}
\makeatother

%\addcontentsline{toc}{section}{#1}}
%%        \stepcounter{numrecette}
        {%
%        \textcolor{ocre}{{\Huge \textbf{#1\hfill}}} 
%        }
    
%    \vspace{1em}    
    


% Icons and text
\newcommand{\preptime}[1]{
  \includegraphics[height=15pt]{pictures/ico/chef.png}
  {\raisebox{3pt}{\sffamily #1\hspace{1em}}}
}

\newcommand{\cooktime}[1]{
  \includegraphics[height=15pt]{pictures/ico/pot.png}
  {\raisebox{3pt}{\sffamily #1\hspace{1em}}}
}

\newcommand{\baketime}[1]{
  \includegraphics[height=15pt]{pictures/ico/oven.png}
  {\raisebox{3pt}{\sffamily #1\hspace{1em}}}
}

\newcommand{\people}[1]{
  \includegraphics[height=15pt]{pictures/ico/plate.png}
  {\raisebox{3pt}{\sffamily #1\hspace{1em}}}
}

\newcommand{\cooltime}[1]{
  \includegraphics[height=15pt]{pictures/ico/fridge.png}
  {\raisebox{3pt}{\sffamily #1\hspace{1em}}}
}

\newcommand{\robot}[1]{
  \includegraphics[height=15pt]{pictures/ico/robot.png}
  {\raisebox{3pt}{\sffamily #1\hspace{1em}}}
}

% icon from https://www.flaticon.com/fr/auteurs/those-icons


% Ingredients
\RequirePackage{wrapfig}                     % To wrap the tabular with the ingredients
\RequirePackage{units}
\RequirePackage{tabulary}                    % line breaks in tabular

\newcommand{\recipe}[2]{
    \vspace{3em}\noindent
    \begin{minipage}[t]{0.35\textwidth}
        {\sffamily\bfseries Les ingr√©dients}
        \\[1em]
        \begin{tabulary}{\textwidth}{rL}
                #1
        \end{tabulary}
    \end{minipage}
    \begin{minipage}[t]{0.64\textwidth}
        {\sffamily\bfseries La recette}
        \begin{enumerate}[label=\color{ocre}\theenumi, font=\bfseries]
            #2 
        \end{enumerate}
    \end{minipage}
}


% The photo of the recipe
\newcommand{\photo}[1]{
    \newpage
    \vfill{ \transparent{0} :)}
    \AddToShipoutPictureBG*{\includegraphics[width=\paperwidth,height=\paperheight]{#1}}
}

\newcommand*{\info}[1]
    {\vfill
        \begin{tikzpicture}[overlay]
            \draw[line width=1.5pt,color=ocre] (-.2,0) -- (3,0);
            \draw[line width=1.5pt,color=ocre] (0,.2) -- (0,-1);
        \end{tikzpicture}
        
        \vspace{1em}
        \hspace{1em}\begin{minipage}{.915\textwidth}%
            \itshape#1
        \end{minipage}
    }

\endinput
